<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<style>
			body {
				background-color: #222;
				font-family: Roboto;
				font-size: 16px;
				color: #FFF;
			}
			air-humidifier-card {
				margin-bottom: 0.5rem;
			}
		</style>
	</head>
	<body>


		<script type="importmap">
		{
			"imports": {
				"lit": "/node_modules/lit/index.js",
				"lit/": "/node_modules/lit/",
				"lit-element": "/node_modules/lit-element/index.js",
				"lit-element/": "/node_modules/lit-element/",
				"lit-html": "/node_modules/lit-html/lit-html.js",
				"lit-html/": "/node_modules/lit-html/",
				"@lit/": "/node_modules/@lit/",
				"@lit/reactive-element/": "/node_modules/@lit/reactive-element/",
				"@lit/reactive-element": "/node_modules/@lit/reactive-element/reactive-element.js"
			}
		}
		</script>

		<script src="./lit.umd.js"></script>
		<script src="./ha-card.js"></script>
		<script src="./dist/my-awesome-cards.js"></script>
		<script type="module">
			import {html, render} from 'lit'

			const config = {"type":"custom:air-humidifier-card","entity":"humidifier.humidifier","some_other_arg":123}

			const baseState = {
				"humidifier":{"entity_id":"humidifier.humidifier","state":"on","attributes":{"min_humidity":30,"max_humidity":80,"available_modes":["Low","Medium","High","Humidity"],"humidity":50,"mode":"Humidity","device_class":"humidifier","friendly_name":"Humidifier","supported_features":1},"last_changed":"2022-03-26T11:58:17.527766+00:00","last_updated":"2022-03-26T12:03:24.426758+00:00","context":{"id":"89f855fbc4a5ea809df1e1ec20398722","parent_id":null,"user_id":null}},
				"water_tank_empty":{"entity_id":"binary_sensor.humidifier_water_tank_empty","state":"off","attributes":{"icon":"mdi:water-off-outline","friendly_name":"Humidifier Water Tank Empty"},"last_changed":"2022-03-25T14:50:07.601457+00:00","last_updated":"2022-03-25T14:50:07.601457+00:00","context":{"id":"01f71dcd63c4f9c750c7a42c236efa12","parent_id":null,"user_id":null}},
				"water_tank":{"entity_id":"binary_sensor.humidifier_water_tank","state":"on","attributes":{"device_class":"connectivity","icon":"mdi:car-coolant-level","friendly_name":"Humidifier Water Tank"},"last_changed":"2022-03-25T14:50:07.602006+00:00","last_updated":"2022-03-25T14:50:07.602006+00:00","context":{"id":"495c3df23247b83aa1aee8ebb64ae57c","parent_id":null,"user_id":null}},
				"temperature":{"entity_id":"sensor.humidifier_temperature","state":"22","attributes":{"state_class":"measurement","unit_of_measurement":"°C","device_class":"temperature","friendly_name":"Humidifier Temperature"},"last_changed":"2022-03-25T21:22:13.429359+00:00","last_updated":"2022-03-25T21:22:13.429359+00:00","context":{"id":"dfaaa9e5bd96aca6a4a39829099dfb81","parent_id":null,"user_id":null}},
				"humidity":{"entity_id":"sensor.humidifier_humidity","state":"37","attributes":{"state_class":"measurement","unit_of_measurement":"%","device_class":"humidity","friendly_name":"Humidifier Humidity"},"last_changed":"2022-03-26T12:08:06.617324+00:00","last_updated":"2022-03-26T12:08:06.617324+00:00","context":{"id":"ed617fe690da3636a72c854d57e76fd9","parent_id":null,"user_id":null}},
				"buzzer":{"entity_id":"switch.humidifier_buzzer","state":"off","attributes":{"icon":"mdi:volume-high","friendly_name":"Humidifier Buzzer"},"last_changed":"2022-03-25T14:50:07.603157+00:00","last_updated":"2022-03-25T14:50:07.603157+00:00","context":{"id":"97526929473e8f105530ec87ea6656b1","parent_id":null,"user_id":null}},
				"led":{"entity_id":"switch.humidifier_led","state":"off","attributes":{"icon":"mdi:led-outline","friendly_name":"Humidifier Led"},"last_changed":"2022-03-25T14:50:07.603433+00:00","last_updated":"2022-03-25T14:50:07.603433+00:00","context":{"id":"07403870cec6e8ab481b20889144924f","parent_id":null,"user_id":null}}
			}

			const aa = {"humidifier":{"entity_id":"humidifier.humidifier","state":"off","attributes":{"min_humidity":30,"max_humidity":80,"available_modes":["Low","Medium","High","Humidity"],"mode":"Humidity","device_class":"humidifier","friendly_name":"Humidifier","supported_features":1},"last_changed":"2022-03-27T05:18:50.527775+00:00","last_updated":"2022-03-27T05:18:50.527775+00:00","context":{"id":"6a80168547452853e3f08a3bab12ddd3","parent_id":null,"user_id":null}},"water_tank_empty":{"entity_id":"binary_sensor.humidifier_water_tank_empty","state":"off","attributes":{"icon":"mdi:water-off-outline","friendly_name":"Humidifier Water Tank Empty"},"last_changed":"2022-03-27T05:18:50.525481+00:00","last_updated":"2022-03-27T05:18:50.525481+00:00","context":{"id":"61a03cd85bf73879c315dd7e1abc0287","parent_id":null,"user_id":null}},"water_tank":{"entity_id":"binary_sensor.humidifier_water_tank","state":"on","attributes":{"device_class":"connectivity","icon":"mdi:car-coolant-level","friendly_name":"Humidifier Water Tank"},"last_changed":"2022-03-27T05:18:50.525861+00:00","last_updated":"2022-03-27T05:18:50.525861+00:00","context":{"id":"c3211ba397db27fcb7fc52316be645a3","parent_id":null,"user_id":null}},"temperature":{"entity_id":"sensor.humidifier_temperature","state":"22","attributes":{"state_class":"measurement","unit_of_measurement":"°C","device_class":"temperature","friendly_name":"Humidifier Temperature"},"last_changed":"2022-03-27T05:18:50.526277+00:00","last_updated":"2022-03-27T05:18:50.526277+00:00","context":{"id":"811fb642d51a97d1a03badba725db1e7","parent_id":null,"user_id":null}},"humidity":{"entity_id":"sensor.humidifier_humidity","state":"37","attributes":{"state_class":"measurement","unit_of_measurement":"%","device_class":"humidity","friendly_name":"Humidifier Humidity"},"last_changed":"2022-03-27T11:45:35.642603+00:00","last_updated":"2022-03-27T11:45:35.642603+00:00","context":{"id":"7aaa1c5eb57e4aefa73e19f50d972c2e","parent_id":null,"user_id":null}},"buzzer":{"entity_id":"switch.humidifier_buzzer","state":"off","attributes":{"icon":"mdi:volume-high","friendly_name":"Humidifier Buzzer"},"last_changed":"2022-03-27T05:18:50.526979+00:00","last_updated":"2022-03-27T05:18:50.526979+00:00","context":{"id":"923d40b6dc2e73262d09db8938a1b832","parent_id":null,"user_id":null}},"led":{"entity_id":"switch.humidifier_led","state":"off","attributes":{"icon":"mdi:led-outline","friendly_name":"Humidifier Led"},"last_changed":"2022-03-27T05:18:50.527281+00:00","last_updated":"2022-03-27T05:18:50.527281+00:00","context":{"id":"b5b5ecc63158165bc3cafaf93703daa1","parent_id":null,"user_id":null}}}

			const errorState = {"humidifier":{"entity_id":"humidifier.humidifier","state":"unavailable","attributes":{"min_humidity":30,"max_humidity":80,"available_modes":["Low","Medium","High","Humidity"],"device_class":"humidifier","friendly_name":"Humidifier","supported_features":1},"last_changed":"2022-03-26T16:53:06.008631+00:00","last_updated":"2022-03-26T16:53:06.008631+00:00","context":{"id":"2498af3b4d2753163e02177cc6ed87d9","parent_id":null,"user_id":null}},"water_tank_empty":{"entity_id":"binary_sensor.humidifier_water_tank_empty","state":"unavailable","attributes":{"icon":"mdi:water-off-outline","friendly_name":"Humidifier Water Tank Empty"},"last_changed":"2022-03-26T16:53:06.006293+00:00","last_updated":"2022-03-26T16:53:06.006293+00:00","context":{"id":"0e10db02e601e7471242e387bfa2c4d9","parent_id":null,"user_id":null}},"water_tank":{"entity_id":"binary_sensor.humidifier_water_tank","state":"unavailable","attributes":{"device_class":"connectivity","icon":"mdi:car-coolant-level","friendly_name":"Humidifier Water Tank"},"last_changed":"2022-03-26T16:53:06.006726+00:00","last_updated":"2022-03-26T16:53:06.006726+00:00","context":{"id":"0e6e0cf8d4f7f9ff817bf52330c35cc8","parent_id":null,"user_id":null}},"temperature":{"entity_id":"sensor.humidifier_temperature","state":"unavailable","attributes":{"state_class":"measurement","unit_of_measurement":"°C","device_class":"temperature","friendly_name":"Humidifier Temperature"},"last_changed":"2022-03-26T16:53:06.007141+00:00","last_updated":"2022-03-26T16:53:06.007141+00:00","context":{"id":"0f87e6b7e3ef4c58071d1dbfeb0ed939","parent_id":null,"user_id":null}},"humidity":{"entity_id":"sensor.humidifier_humidity","state":"unavailable","attributes":{"state_class":"measurement","unit_of_measurement":"%","device_class":"humidity","friendly_name":"Humidifier Humidity"},"last_changed":"2022-03-26T16:53:06.007465+00:00","last_updated":"2022-03-26T16:53:06.007465+00:00","context":{"id":"34aaf3e1b8d4dcd8f9a268f867511e24","parent_id":null,"user_id":null}},"buzzer":{"entity_id":"switch.humidifier_buzzer","state":"unavailable","attributes":{"icon":"mdi:volume-high","friendly_name":"Humidifier Buzzer"},"last_changed":"2022-03-26T16:53:06.007806+00:00","last_updated":"2022-03-26T16:53:06.007806+00:00","context":{"id":"416c0bc5841eff898500025f51edab0d","parent_id":null,"user_id":null}},"led":{"entity_id":"switch.humidifier_led","state":"unavailable","attributes":{"icon":"mdi:led-outline","friendly_name":"Humidifier Led"},"last_changed":"2022-03-26T16:53:06.008091+00:00","last_updated":"2022-03-26T16:53:06.008091+00:00","context":{"id":"2b29e89043a7c6fb16d28788f2f72bb8","parent_id":null,"user_id":null}}}

			const demoStates = [
				s => s.humidifier.state = 'off',
				s => s,
				s => s.water_tank_empty.state = 'on',
				s => {
					s.humidifier.state = 'on'
					s.humidifier.attributes.humidity = 50
					s.humidity.state = '57'
				},
				s => s.humidifier.attributes.mode = 'Low',
				s => s.humidifier.attributes.mode = 'Medium',
				s => s.humidifier.attributes.mode = 'High',
				s => Object.assign(s, errorState),
				s => {
					s.humidifier.state = 'off'
					s.humidifier.attributes.humidity = undefined
					s.humidity.state = '36'
				},
			]

			const cards = new Array(demoStates.length).fill(0).map(a => html`<air-humidifier-card></air-humidifier-card>`)
			render(cards, document.body)

			const cardNodes = Array.from(document.querySelectorAll('air-humidifier-card'))
			
			demoStates.forEach((cb, i) => {
				const card = cardNodes[i]
				let newState = JSON.parse(JSON.stringify(baseState))
				cb(newState)
				card.setConfig({...config})
				card.state = newState
				setTimeout(() => card.requestUpdate())
			})

		</script>
	</body>
</html>
