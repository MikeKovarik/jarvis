<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<style>
			body {
				background-color: #111;
				font-family: Roboto;
				font-size: 16px;
				color: #FFF;
			}
			light-card {
				width: 300px;
				height: 120px;
				margin: 0.5rem;
			}
		</style>
	</head>
	<body>

		<script type="importmap">
		{
			"imports": {
				"lit": "/node_modules/lit/index.js",
				"lit/": "/node_modules/lit/",
				"lit-element": "/node_modules/lit-element/index.js",
				"lit-element/": "/node_modules/lit-element/",
				"lit-html": "/node_modules/lit-html/lit-html.js",
				"lit-html/": "/node_modules/lit-html/",
				"@lit/": "/node_modules/@lit/",
				"@lit/reactive-element/": "/node_modules/@lit/reactive-element/",
				"@lit/reactive-element": "/node_modules/@lit/reactive-element/reactive-element.js"
			}
		}
		</script>

		<script src="./lit.umd.js"></script>
		<script src="./ha-card.js"></script>
		<script src="./dist/my-awesome-cards.js"></script>
		<script type="module">
			import {html, render} from 'lit'

			const config = {"type":"custom:light-card"}

			const demoStates = [
				{"light":{"entity_id":"light.bulb_couch","state":"off","attributes":{"effect_list":["blink","breathe","okay","channel_change","finish_effect","stop_effect"],"supported_color_modes":["brightness"],"linkquality":81,"update":{"state":"available"},"update_available":null,"friendly_name":"bulb-couch","supported_features":45},"last_changed":"2022-03-26T23:25:31.459077+00:00","last_updated":"2022-03-27T13:55:05.838614+00:00","context":{"id":"51d270fde31e539d5f4252018e4ae66c","parent_id":null,"user_id":null}},"update_available":{"entity_id":"binary_sensor.bulb_couch_update_available","state":"on","attributes":{"brightness":64,"linkquality":81,"update":{"state":"available"},"update_available":null,"device_class":"update","friendly_name":"bulb-couch update available"},"last_changed":"2022-03-26T17:49:37.388495+00:00","last_updated":"2022-03-27T13:55:05.837611+00:00","context":{"id":"0d52b290be1467318de584f6bc8ac8b2","parent_id":null,"user_id":null}}},
				{"light":{"entity_id":"light.bulb_couch","state":"off","attributes":{"effect_list":["blink","breathe","okay","channel_change","finish_effect","stop_effect"],"supported_color_modes":["brightness"],"color_mode":"brightness","brightness":136,"linkquality":96,"update":{"state":"available"},"update_available":null,"friendly_name":"bulb-couch","supported_features":45},"last_changed":"2022-03-27T14:01:27.485387+00:00","last_updated":"2022-03-27T14:01:28.472152+00:00","context":{"id":"650c85d8cb9fddfce41d66f7ad5cbe18","parent_id":null,"user_id":"bf4261b893ef4dcebafd918baa751736"}},"update_available":{"entity_id":"binary_sensor.bulb_couch_update_available","state":"on","attributes":{"brightness":136,"linkquality":96,"update":{"state":"available"},"update_available":null,"device_class":"update","friendly_name":"bulb-couch update available"},"last_changed":"2022-03-26T17:49:37.388495+00:00","last_updated":"2022-03-27T14:01:28.471213+00:00","context":{"id":"ae9bffa778da3c0feeabecaef64b6310","parent_id":null,"user_id":null}}},
				{"light":{"entity_id":"light.bulb_couch","state":"on","attributes":{"effect_list":["blink","breathe","okay","channel_change","finish_effect","stop_effect"],"supported_color_modes":["brightness"],"color_mode":"brightness","brightness":136,"linkquality":96,"update":{"state":"available"},"update_available":null,"friendly_name":"bulb-couch","supported_features":45},"last_changed":"2022-03-27T14:01:27.485387+00:00","last_updated":"2022-03-27T14:01:28.472152+00:00","context":{"id":"650c85d8cb9fddfce41d66f7ad5cbe18","parent_id":null,"user_id":"bf4261b893ef4dcebafd918baa751736"}},"update_available":{"entity_id":"binary_sensor.bulb_couch_update_available","state":"on","attributes":{"brightness":136,"linkquality":96,"update":{"state":"available"},"update_available":null,"device_class":"update","friendly_name":"bulb-couch update available"},"last_changed":"2022-03-26T17:49:37.388495+00:00","last_updated":"2022-03-27T14:01:28.471213+00:00","context":{"id":"ae9bffa778da3c0feeabecaef64b6310","parent_id":null,"user_id":null}}},
				{"light":{"entity_id":"light.bulb_couch","state":"on","attributes":{"effect_list":["blink","breathe","okay","channel_change","finish_effect","stop_effect"],"supported_color_modes":["brightness"],"color_mode":"brightness","brightness":255,"linkquality":102,"update":{"state":"available"},"update_available":null,"friendly_name":"bulb-couch","supported_features":45},"last_changed":"2022-03-27T14:01:27.485387+00:00","last_updated":"2022-03-27T14:01:55.160010+00:00","context":{"id":"3cb6f5165d201ff488b48bf953463f80","parent_id":null,"user_id":"bf4261b893ef4dcebafd918baa751736"}},"update_available":{"entity_id":"binary_sensor.bulb_couch_update_available","state":"on","attributes":{"brightness":254,"linkquality":102,"update":{"state":"available"},"update_available":null,"device_class":"update","friendly_name":"bulb-couch update available"},"last_changed":"2022-03-26T17:49:37.388495+00:00","last_updated":"2022-03-27T14:01:55.158035+00:00","context":{"id":"556293fad677225d8a87097aa076e133","parent_id":null,"user_id":null}}},
				{"switch":{"entity_id":"switch.lamp_reading","state":"off","attributes":{"color_mode":"xy","linkquality":126,"update":{"state":"available"},"update_available":null,"friendly_name":"lamp-reading"},"last_changed":"2022-03-26T17:50:58.712663+00:00","last_updated":"2022-03-27T13:50:59.330792+00:00","context":{"id":"627b372e4dc5339f591e436832c5a6cb","parent_id":null,"user_id":null}},"update_available":{"entity_id":"binary_sensor.lamp_reading_update_available","state":"on","attributes":{"color_mode":"xy","linkquality":126,"update":{"state":"available"},"update_available":null,"device_class":"update","friendly_name":"lamp-reading update available"},"last_changed":"2022-03-26T17:49:37.275738+00:00","last_updated":"2022-03-27T13:50:59.329956+00:00","context":{"id":"41c587b7645c6d0607d329296cadb837","parent_id":null,"user_id":null}}},
				{"switch":{"entity_id":"switch.plug_heatpad","state":"on","attributes":{"device_temperature":32,"energy":6.43,"linkquality":153,"power":0,"update":{"state":"idle"},"update_available":null,"friendly_name":"plug-heatpad"},"last_changed":"2022-03-26T23:06:43.053944+00:00","last_updated":"2022-03-27T14:03:10.103185+00:00","context":{"id":"92bb1fc6f2ad04bf07619b6a342b739d","parent_id":null,"user_id":null}},"power":{"entity_id":"sensor.plug_heatpad_power","state":"0","attributes":{"state_class":"measurement","device_temperature":32,"energy":6.43,"linkquality":153,"power":0,"update":{"state":"idle"},"update_available":null,"unit_of_measurement":"W","device_class":"power","friendly_name":"plug-heatpad power"},"last_changed":"2022-03-27T14:01:36.623165+00:00","last_updated":"2022-03-27T14:03:10.100840+00:00","context":{"id":"51010352d6107d89a16a937c44895be8","parent_id":null,"user_id":null}},"energy":{"entity_id":"sensor.plug_heatpad_energy","state":"6.43","attributes":{"state_class":"total_increasing","device_temperature":32,"energy":6.43,"linkquality":153,"power":0,"update":{"state":"idle"},"update_available":null,"unit_of_measurement":"kWh","device_class":"energy","friendly_name":"plug-heatpad energy"},"last_changed":"2022-03-27T13:15:57.476658+00:00","last_updated":"2022-03-27T14:03:10.101504+00:00","context":{"id":"1729194ef96e363d98d3c2dffb0a490e","parent_id":null,"user_id":null}},"device_temperature":{"entity_id":"sensor.plug_heatpad_device_temperature","state":"32","attributes":{"state_class":"measurement","device_temperature":32,"energy":6.43,"linkquality":153,"power":0,"update":{"state":"idle"},"update_available":null,"unit_of_measurement":"Â°C","device_class":"temperature","friendly_name":"plug-heatpad device temperature"},"last_changed":"2022-03-27T13:17:46.166709+00:00","last_updated":"2022-03-27T14:03:10.102062+00:00","context":{"id":"443f734574a91738176c74d45ee78ff3","parent_id":null,"user_id":null}},"update_available":{"entity_id":"binary_sensor.plug_heatpad_update_available","state":"off","attributes":{"device_temperature":32,"energy":6.43,"linkquality":153,"power":0,"update":{"state":"idle"},"update_available":null,"device_class":"update","friendly_name":"plug-heatpad update available"},"last_changed":"2022-03-26T17:49:06.004490+00:00","last_updated":"2022-03-27T14:03:10.102627+00:00","context":{"id":"7d929aae365d5b23ac95d1b21406d515","parent_id":null,"user_id":null}}},
			]

			const cards = new Array(demoStates.length).fill(0).map(a => html`<light-card></light-card>`)
			render(cards, document.body)

			const cardNodes = Array.from(document.querySelectorAll('light-card'))
			
			demoStates.forEach((state, i) => {
				const card = cardNodes[i]
				const entity = (state.light ?? state.switch).entity_id
				const cfg = {entity, ...config}
				const newState = JSON.parse(JSON.stringify(state))
				card.setConfig(cfg)
				card.state = newState
				card.onStateUpdate()
				setTimeout(() => card.requestUpdate())
			})

		</script>
	</body>
</html>
